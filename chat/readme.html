<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>AJAX Chat Readme</title>
	
	<style type="text/css">
	body,td,th { font-family: Arial, Helvetica, sans-serif; line-height:1.6em; color:#000; font-size: inherit; }
	body{background:#FFFFFF;margin:0;font-size: 0.8em;}
	pre{font-size: 1.2em}
	.container{max-width:1200px;margin:0 auto;padding:1.5em;}
	.subsection{border:1px solid #006;padding:0.8em 1.6em; background:#F2F5F9;}
	.subsection .subsection{border:0}
	a{color:#036;text-decoration:none}
	.filename{color:#060}
	.note{font-style:italic;font-family:trebuchet ms,sans-serif;background-color:#5B62E6;color:white;border-radius:10px;padding:1em 1.2em;margin:1em;}
	.note h3{background:transparent;border-radius:0;color:white;padding-top:0;font-family:trebuchet ms,sans-serif;}
	.note a {color: #F0F0FF;}
	a:hover{color:#03F;text-decoration:underline}
	a:active{color:#03F;text-decoration:none;text-align:center}
	h1,h2,h3,h4,h5,h6{font-weight:400;line-height:100%;margin:0; font-family: Verdana, Geneva, sans-serif;}
	h2{font-size:1.3em;color:#FFF;background-color:#2F2E8B;border-radius:5px 5px 0 0;margin:2em 0 0;padding:.5em}
	h2:target{background-color:#6854E4;}
	header{color:#E3E3FB; background: #2F2E8B; font-weight: 700;}
	.version { font-size: 0.6em; font-weight: bold; line-height: 150%; display: block; }
	.version a { color:#e4e4e4; text-decoration: underline;}
	ol li{margin-bottom:1em}
	h3{color:#000;background-color:#CED2DD;padding:.5em; font-weight: bold;border-radius:5px;}
	code{display:block;background-color:#DDD;margin:1em;padding:1em; font-family: Consolas,"Liberation Mono",Courier,monospace;}
	table{border:0}
	td{padding:.2em}
	th{font-weight:bold;vertical-align:middle;text-align:left;padding:.2em; }
	p{margin:.5em 0}
	#toc{color:#000;background:#F9E7E7;display:block;float:right;width:22em;line-height:170%;border-radius:6px;border:1px solid #EB5B56;margin:0 0 1em 1em;padding:15px}
	#toc h2{background:#EB5B56;color:#FFF;margin:-15px -15px 0.8em;padding:0.5em}
	#toc ol{margin:0; padding: 0 0 0 2em;font-size:1.2em;}
	#toc ol li{margin:0;padding:0}
	</style>
</head>

<body>
<header>
	<div class="container">
		<h1>
			AJAX Chat phpBB3 (for 3.0.x)
			<span class="version">
				v 0.8.8 phpBB 3.0.x ( <a href="https://blueimp.net/ajax/">blueimp.net/ajax/</a> )
			</span>
		</h1>
	</div>
</header>

<div class="container">

<div id="toc">
	<h2>Table of Contents</h2>
	<ol>
		<li><a href="#requirements">Requirements</a></li>
		<li><a href="#installation">Installation</a></li>
		<li><a href="#configuring">Configuring and Customizing</a></li>
		<li><a href="#logs">Logs</a></li>
		<li><a href="#shoutbox">Shoutbox</a></li>
		<li><a href="#support">Support</a></li>
		<li><a href="#donate">Donate</a></li>
		<li><a href="#license">License</a></li>
	</ol>
</div>

<div style="margin-right: 28em;">
	<h2 style="margin-top:0;">Version Information</h2>
	<div class="subsection">
		This is the version of Blueimp's AJAX Chat desinged to be run with <b>phpBB3 version 3.0.x</b>.<br>
		If you want to integrate AJAX Chat with one of the other forums we support, go back and choose the right version.

		<p class="note">
			AJAX stands for &quot;Asynchronous JavaScript and XML&quot;.<br>
			The AJAX Chat client (your browser) uses JavaScript to query the web server for updates.<br>
			Instead of delivering a complete HTML page only updated data is sent in XML format.<br>
			By using JavaScript the chat page can be updated without having to reload the whole page.<br>
			PHP is used to communicate with the database and authenticate users.
		</p>
	</div>
</div>

<h2 id="requirements">1. Requirements</h2>
<div class="subsection">
	<table style="width: 550px;" summary="Requirements for running AJAX Chat.">
	<tr>
		<th width="275" scope="col">Server-Side</th>
		<th width="275" scope="col">Client-Side</th>
	</tr>
	<tr>
		<td>
			PHP &gt;= 5<br>
			MySQL &gt;= 4<br>
			Ruby &gt;= 1.8 (optional)
		</td>
		<td>
			Enabled JavaScript<br>
			Enabled Cookies<br>
		</td>
	</tr>
	</table>
</div>

<h2 id="installation">2. Installation</h2>
<div class="subsection">
    <p>Download your preferred version of AJAX Chat and unzip the file on your computer.<br></p>

    <section class="note">
		<h3>Use a Proper Text Editor!</h3>
		In order to edit PHP files you will need a good text editor. <strong>You should not use Windows notepad, wordpad, or Microsoft Word to edit PHP files.</strong> These programs will add something called a byte-order-mark (BOM) to the files and this may prevent chat from functioning properly. 
		We recommend using Notepad ++ ( <a href="http://notepad-plus-plus.org/">http://notepad-plus-plus.org</a> ) for editing all files. It also has the benefit of color-coding your files so you can edit them more easily.<br>
		If you get an error message like &quot;<strong>Cannot modify header information - headers already sent</strong>&quot; it is likely because you have used one of the above programs to edit files.
    </section>
	
	<h3>Upload to Server</h3>
	<div class="subsection">
		Upload the chat folder to your server into your phpBB3 forum directory:<br>
		eg. <span class="filename">http://example.org/phpBB3/chat/</span>
	</div>

	<h3>Create the Database Tables</h3>
    <div class="subsection">
      <p>There are two options available to you to create the database. The first, and usually the easiest option, is to run the installation script included with AJAX Chat. Alternatively, you may use a database tool like PHPMyAdmin to manually create the tables.</p>
      <ol>
        <li>
          <span class="filename">http://example.org/phpBB3/chat/install.php</span><br> 
			Where &quot;http://example.org/phpBB3/chat/&quot; is the real URL to your chat directory.<br>
			Be sure to delete the install.php file after you have completed this step!
		</li>
        <li>To install it manually using PHPMyAdmin or a similar tool, copy the contents of the <span class="filename">chat.sql</span> file and run it as a query.</li>
      </ol>
      <p>Either of these methods will create the tables your database needs to store chat messages and other information.</p>
    </div>
	
    <h3>Delete the Installation Script</h3>
    <div class="subsection">
      <p>Delete the file <span class="filename">install.php</span> from the chat directory on your server. You may also delete the file <span class="filename">chat.sql</span>.</p>
    </div>
	
    <h3>Congradulation! You Are Winner!</h3>
    <div class="subsection">
      <p>Yay! You're done! To test your chat, navigate to your chat URL in a browser: <span class="filename">http://example.org/path/to/chat/index.php<br>
      </span>You are now free to customize chat to further suit your needs.</p>
    </div>
</div>

<h2 id="configuring">3. Configuring and Customizing</h2>
<div class="subsection">
  <h3>Configuration Files</h3>
  <div class="subsection">
    <p>AJAX Chat is fully customizable and contains two configuration files:</p>
    <ol>
      <li><span class="filename">lib/config.php</span>: This file contains the core configuration options for chat. Essential options for configuring the database, security, available languages, etc, are found here.</li>
      <li><span class="filename">js/config.js</span>: This file contains client side settings that change your users' default options in chat. Many of these settings can be changed by users in their options but some (like the refresh rate) cannot. </li>
    </ol>
    <p>Both of these files are well commented with information on what the settings mean.</p>
  </div>
  
  <h3>Customizing the Layout </h3>
  <div class="subsection">
    <p>The layout of AJAX Chat is fully customizable by using CSS (Cascaded Style Sheets).<br>
      AJAX Chat comes with a predefined set of styles. To add your own style, do the following:</p>
    <ol>
      <li>Add a new CSS file (e.g. mystyle.css) by copying one of the existing styles from the CSS directory.</li>
      <li>Edit your file (css/mystyle.css) and adjust the CSS settings to your liking.</li>
      <li>Add the name of your style without file extension to the available styles in lib/config.php:<br>
        <code>// Available styles:      <br>
      $config['styleAvailable'] = array('mystyle','beige','black','grey');<br>
      // Default style:<br>
      $config['styleDefault'] = 'mystyle';</code></li>
    </ol>
    <p>To further customize the layout you can adjust the template files in lib/template/.</p>
    <p>Make sure you are creating valid XHTML, else you will produce errors in modern browsers.<br>
      This is due to the page content-type served as &quot;application/xhtml+xml&quot;.<br>
      Using this content-type improves performance when manipulating the Document Object Model (DOM).</p>
    <p>If for some reason you cannot create valid XHTML you can force a HTML content-type.<br>
      Just edit lib/config.php and set the following option:</p>
    <p><code>$config['contentType'] = 'text/html';</code></p>
  </div>
  
  <h3>Adjusting the Language Settings</h3>
  <div class="subsection">
    <p>AJAX Chat comes with two language file directories:</p>
    <ol>
      <li><span class="filename">js/lang/</span>: This directory contains the language files used for the chat messages localization. These are JavaScript files with the extension &quot;.js&quot;.</li>
      <li><span class="filename">lib/lang/</span>: This directory contains the language files used for the template output. These are PHP files with the extension &quot;.php&quot;.</li>
    </ol>
    <p>Many languages are already included with the download and you can customize them by editing these files.<br>
      For each language, you need a file in both of these directories, with the language code as file name (such as en.js and en.php)..<br>
    The language code is used following the ISO 639 standards.</p>
    <p>The files for the english (language code &quot;en&quot;) localization are <span class="filename">js/lang/en.js</span> and <span class="filename">lib/lang/en.php</span>.</p>
    <p>If you create your own localization, you must put the files in the correct folders and then make two changes to config.php:</p>
    <ol>
      <li>Add the language code (this must match the filename you chose for the language. Remember to use commas correctly to separate multiple language codes): <br>
      <code>$config['langAvailable'] = array('en');      </code></li>
      <li>Add the language name (this is what users see in the dropdown menu to choose the language): <br>
      <code>$config['langNames'] = array('en'=&gt;'English');</code></li>
    </ol>
    <p>To avoid errors, you should follow these rules:</p>
    <ol>
      <li>Make sure you encode your localization files in UTF-8 (without Byte-order mark).</li>
      <li>Don't use HTML entities in your localization files.</li>
      <li>Don't remove any &quot;%s&quot; inside the JavaScript language files - these are filled with dynamic data.  </li>
    </ol>
  </div>
  
  <h3>Adding Features</h3>
  <div class="subsection">
    <p>AJAX Chat is designed with numerous hooks and overrides available to improve core functionality without requiring you to edit the core files.
	With an intermediate understading of PHP and javascript you can modify your chat to suit your needs.</p>
	<p>Have a look through a few examples available on the wiki: 
	<a href="https://github.com/Frug/AJAX-Chat/wiki/General-modifications">https://github.com/Frug/AJAX-Chat/wiki/General-modifications</a>
	</p>
  </div>
  
</div>

<h2 id="logs">4. Logs</h2>
<div class="subsection">
  <h3>Accessing the Logs</h3>
  <div class="subsection">
    <p>By default, AJAX Chat stores all chat messages in the database.<br>
      To access the logs you have to add the GET parameter view=logs to your chat url (add ?view=logs to the end of the url):</p>
    <p class="note">e.g. http://example.org/path/to/chat/?view=logs</p>
    <p>If you are not already logged in, you have to login as administrator to access the logs.</p>
    <p>The log view enables you to monitor the latest chat messages on all channels.<br>
      It is also possible to view the logs of private rooms and private messages.<br>
    You have the option to filter the logs by date, time and search strings.</p>
    <p class="note">The search filter accepts MySQL style regular expressions as described here: <a href="http://dev.mysql.com/doc/refman/5.1/en/regexp.html">http://dev.mysql.com/doc/refman/5.1/en/regexp.html</a><br>
    You can search for IPs, using the following syntax: ip=127.0.0.1</p>
  </div>
</div>

<h2 id="shoutbox">5. Shoutbox</h2>
<div class="subsection">
  <p>AJAX Chat is also usable as shoutbox - this is a short guide on how to set it up to display on a PHPBB3 forum.<br>
  The following edits are made in files you can find in your phpbb3 installation directory.</p>

  
	<h3>PHPBB3 Shoutbox Integration</h3>
	<div class="subsection">
    <p><b>In includes/functions.php</b></p>
	
	Add:
    <code><pre>
function getShoutBoxContent()
{
	global $phpEx, $phpbb_root_path;

	// Get the URL to the chat directory:
	if (!defined('AJAX_CHAT_URL'))
	{
		define('AJAX_CHAT_URL', $phpbb_root_path . 'chat/');
	}

	// Get the real path to the chat directory:
	if (!defined('AJAX_CHAT_PATH'))
	{
		if (empty($_SERVER['SCRIPT_FILENAME']))
		{
			$_SERVER['SCRIPT_FILENAME'] = $_SERVER['DOCUMENT_ROOT'] . $_SERVER['SCRIPT_URL'];
		}
		define('AJAX_CHAT_PATH', realpath(dirname($_SERVER['SCRIPT_FILENAME']) . '/chat') . '/');
	}

	// Validate the path to the chat:
	if (@is_file(AJAX_CHAT_PATH . 'lib/classes.' . $phpEx))
	{
		// Include Class libraries:
		require_once(AJAX_CHAT_PATH.'lib/classes.' . $phpEx);

		// Initialize the shoutbox:
		$ajaxChat = new CustomAJAXChatShoutBox();

		// Parse and return the shoutbox template content:
		return $ajaxChat->getShoutBoxContent();
	}

	return null;
}
    </pre></code>
	Before
	<code><pre>?></pre></code>
	Add:
	<code><pre>'SHOUTBOX'                  => getShoutBoxContent(),</pre></code>
	After
	<code><pre>
	// The following assigns all _common_ variables that may be used at any point in a template.
	$template->assign_vars(array(</pre></code>
	
	<p><b>In styles/[STYLE_NAME]/template/overall_footer.html</b></p>
	Add:
	<code><pre>
	&lt;!-- IF not S_IS_BOT --&gt;
	&lt;div style="font-size: 1.2em; margin-bottom: 20px;"&gt;{SHOUTBOX}&lt;/div&gt;
	&lt;!-- ELSE --&gt;
	&lt;div id="ajaxChatCopyright"&gt;&lt;a href="https://blueimp.net/ajax/"&gt;AJAX Chat&lt;/a&gt; Â© &lt;a href="https://blueimp.net"&gt;blueimp.net&lt;/a&gt;&lt;/div&gt;
	&lt;!-- ENDIF --&gt;</pre></code>
	After
	<code><pre>&lt;div id="page-footer"&gt;</pre></code>
	
	<p><b>In styles/[STYLE_NAME]/theme/stylesheet.css</b></p>
	Add:
	<code>@import url("../../../chat/css/shoutbox.css");</code>
	After
	<code>&lt;div id="page-footer"&gt;</code>
	
	</div>
</div>

<h2 id="support">6. Support</h2>
<div class="subsection">
	<p>
		<b>Please do not email the devs with support questions.</b><br>
		For further documentation and some examples, check out our <a href="https://github.com/Frug/AJAX-Chat/wiki">github wiki</a>.<br>
		For general support questions use <a href="https://groups.google.com/forum/?#!forum/ajax-chat">our google group</a>.<br>
		For specific bug reports and a list of pending issues view <a href="https://github.com/Frug/AJAX-Chat">our github project</a>.<br>
	</p>
</div>

<h2 id="donate">7. Donate</h2>
<div class="subsection">
	<p>
		Your donations contribute to the growth and development of this project and are always appreciated.<br>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
		<input type="hidden" name="cmd" value="_s-xclick">
		<input type="hidden" name="hosted_button_id" value="PUMN737V7XKG8">
		<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" name="submit" alt="donate">
		<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
		</form>
		I'm on gittip at <a href="https://www.gittip.com/Frug/">https://www.gittip.com/Frug</a>
	</p>
</div>

<h2 id="license">8. License</h2>
<div class="subsection">
	<p>Bluimp's AJAX Chat is released under a Modified MIT License.</p>
	<p>You should also find this license included with your download of this project.</p>
</div>

<p align="center"><a href="#top">back to top</a></p>

</div>
</body>
</html>
